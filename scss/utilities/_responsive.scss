@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

// Base mobile styles (applied to all screens, then overridden)
html {
  font-size: $font-size-mobile-md;
  -webkit-text-size-adjust: 100%; // Prevent iOS text scaling
}

body {
  -webkit-tap-highlight-color: transparent; // Remove iOS tap highlights
  touch-action: manipulation; // Better touch scrolling
}

// Mobile-first: Extra small phones (up to 375px)
@include respond-to(xs) {
  html { 
    font-size: $font-size-mobile-xs; 
  }
  
  .wrapper { 
    width: 96vw;
    padding: $mobile-spacing-sm;
  }
  
  h1 {
    font-size: 2.25rem;
    margin-top: 4rem;
    margin-bottom: $mobile-spacing-lg;
    letter-spacing: 0.05rem;
  }
  
  .list-item {
    @include card-mobile;
    flex-direction: column !important;
    align-items: stretch !important;
    padding: $mobile-spacing-lg $mobile-spacing-md;
    margin-bottom: $mobile-spacing-md;
    border-left: 0.375rem solid var(--accent-color);
    
    span {
      @include text-ellipsis-mobile(85vw);
      font-size: $font-size-mobile-lg;
      font-weight: $font-weight-medium;
      margin-bottom: $mobile-spacing-sm;
    }
    
    &:hover, &:active {
      background: var(--accent-color);
      color: var(--background);
      box-shadow: $mobile-shadow-strong;
    }
  }
  
  .modal-content { 
    padding: $mobile-spacing-lg; 
    font-size: $font-size-mobile-md;
    margin: $mobile-spacing-md;
    border-radius: $mobile-border-radius-lg;
    box-shadow: $mobile-shadow-strong;
    
    button {
      @include button-mobile;
      margin: $mobile-spacing-sm $mobile-spacing-xs 0 0;
    }
  }
  
  .edit-input, .save-edit-button {
    @include input-mobile;
  }
  
  .edit-input {
    width: 100%;
    margin: 0 0 $mobile-spacing-md 0;
  }
  
  .save-edit-button {
    @include button-mobile;
    width: 100%;
    margin-left: 0;
    margin-bottom: $mobile-spacing-sm;
  }
  
  .new-list-input {
    @include input-mobile;
    width: 90vw;
    max-width: none;
  }
  
  .new-list-btn, .back-home-btn {
    @include button-mobile;
    width: 90vw;
    max-width: none;
  }
  
  .switch {
    top: $mobile-spacing-lg;
    right: $mobile-spacing-lg;
    max-width: 3.25rem;
    height: 2rem;
    
    .slider {
      border-radius: 2rem;
      
      &:before {
        height: 1.5rem;
        width: 1.5rem;
        left: $mobile-spacing-xs;
        bottom: $mobile-spacing-xs;
      }
    }
    
    input:checked + .slider:before {
      transform: translateX(1.25rem);
    }
  }
  
  .todo {
    margin-bottom: $mobile-spacing-md;
    padding: $mobile-spacing-md;
    border-radius: $mobile-border-radius;
    box-shadow: $mobile-shadow-medium;
    
    .todo-text {
      padding: $mobile-spacing-sm 0;
      font-size: $font-size-mobile-md;
      @include text-ellipsis-mobile(65vw);
    }
    
    .custom-checkbox {
      min-height: 1.5rem;
      min-width: 1.5rem;
      border-width: 0.125rem;
    }
    
    .edit-button, .delete-button {
      min-width: 2.5rem;
      min-height: 2.5rem;
      border-radius: $border-radius-sm;
      
      img {
        width: 1.25rem;
        height: 1.25rem;
      }
    }
  }
}

// Large phones (375px - 480px)
@include respond-to(sm) {
  html { 
    font-size: $font-size-mobile-sm; 
  }
  
  .wrapper { 
    width: 94vw;
    padding: $mobile-spacing-md;
  }
  
  h1 {
    font-size: 2.5rem;
    margin-top: 5rem;
  }
  
  .list-item {
    @include card-mobile;
    flex-direction: column !important;
    align-items: stretch !important;
    padding: $mobile-spacing-lg;
    border-left: 0.4375rem solid var(--accent-color);
    
    span {
      @include text-ellipsis-mobile(80vw);
      font-size: $font-size-mobile-lg;
      margin-bottom: $mobile-spacing-md;
    }
  }
  
  .modal-content { 
    padding: $mobile-spacing-lg; 
    font-size: $font-size-mobile-lg;
    margin: $mobile-spacing-lg;
  }
  
  .edit-input, .save-edit-button {
    font-size: $font-size-mobile-lg;
  }
  
  .edit-input {
    width: 100%;
    margin: 0 0 $mobile-spacing-md 0;
  }
  
  .save-edit-button {
    @include button-mobile;
    width: 100%;
    margin-left: 0;
    margin-bottom: $mobile-spacing-sm;
  }
  
  .new-list-input, #todo-input {
    @include input-mobile;
    width: 88vw;
  }
  
  .new-list-btn, .back-home-btn {
    @include button-mobile;
    width: 88vw;
  }
  
  .todo {
    .todo-text {
      @include text-ellipsis-mobile(70vw);
      font-size: $font-size-mobile-lg;
    }
  }
}

// Tablets (480px - 768px)
@include respond-to(md) {
  html { 
    font-size: $font-size-base; 
  }
  
  .wrapper { 
    width: 90vw;
    padding: $spacing-md;
  }
  
  h1 {
    font-size: 2.75rem;
    margin-top: 5.5rem;
  }
  
  .list-item {
    @include card;
    flex-direction: column !important;
    align-items: stretch !important;
    padding: $spacing-lg;
    border-left: 0.5rem solid var(--accent-color);
    
    span {
      @include text-ellipsis(75vw);
      font-size: $font-size-large;
      margin-bottom: $spacing-md;
    }
  }
  
  .modal-content { 
    padding: $spacing-lg; 
    font-size: $font-size-large;
    margin: $spacing-xl;
  }
  
  .edit-input, .save-edit-button { 
    font-size: $font-size-large; 
  }
  
  .edit-input {
    width: 100%;
    margin: 0 0 $spacing-md 0;
  }
  
  .save-edit-button {
    @include button-primary;
    width: 100%;
    margin-left: 0;
    margin-bottom: $spacing-sm;
  }
  
  .new-list-input, #todo-input {
    width: 85vw;
    font-size: $font-size-large;
  }
  
  .new-list-btn, .back-home-btn {
    @include button-primary;
    width: 85vw;
  }
}

// Small laptops (768px - 1024px)
@include respond-to(lg) {
  html { 
    font-size: 1.05rem; 
  }
  
  .wrapper { 
    width: 80vw; 
    max-width: $max-content-width; 
  }
  
  .list-item {
    @include card;
    flex-direction: row !important;
    align-items: center !important;
    padding: $spacing-lg $spacing-xl;
    
    span {
      @include text-ellipsis(12rem);
    }
  }
  
  .modal-content { 
    padding: $spacing-xl; 
    font-size: 1.15rem; 
  }
  
  .edit-input, .save-edit-button { 
    font-size: 1.15rem; 
  }
  
  .edit-input, .save-edit-button {
    width: auto;
    margin: 0 $spacing-sm 0 0;
  }
  
  .new-list-input, #todo-input {
    width: auto;
    max-width: 25rem;
  }
  
  .new-list-btn, .back-home-btn {
    width: auto;
  }
}

// Large laptops and desktops (1024px+)
@include respond-to(xl) {
  html { 
    font-size: 1.1rem; 
  }
  
  .wrapper { 
    width: $max-content-width; 
    max-width: 100vw; 
  }
  
  .list-item {
    @include card;
    flex-direction: row !important;
    align-items: center !important;
    padding: $spacing-lg $spacing-xl;
    
    span {
      @include text-ellipsis(14rem);
    }
    
    &:hover {
      transform: translateY(-0.125rem);
    }
  }
  
  .modal-content { 
    padding: $spacing-xxl; 
    font-size: 1.2rem; 
  }
  
  .edit-input, .save-edit-button { 
    font-size: 1.2rem; 
  }
  
  .edit-input, .save-edit-button {
    width: auto;
    margin: 0 $spacing-sm 0 0;
  }
}

// Add new animations for mobile
@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(1rem);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from { 
    opacity: 0; 
    transform: translateY(0.625rem);
  }
  to { 
    opacity: 1; 
    transform: translateY(0);
  }
}

@keyframes fadeOut {
  from { 
    opacity: 1;
  }
  to { 
    opacity: 0; 
    height: 0; 
    margin: 0; 
    padding: 0;
  }
}